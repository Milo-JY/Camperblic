{"ast":null,"code":"import _slicedToArray from\"D:/shinjun_Fanal/camperblic/src/main/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import\"../../styles/itemStyles/itemLayOut.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ItemLayOut=function ItemLayOut(_ref){var items=_ref.items,topText=_ref.topText,onLoadMore=_ref.onLoadMore;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),visibleItems=_useState4[0],setVisibleItems=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];useEffect(function(){var initialItemCount=20;var initialItems=items.slice(0,initialItemCount);setVisibleItems(initialItems);},[items]);useEffect(function(){var handleScroll=function handleScroll(){var isAtBottom=window.innerHeight+window.scrollY>=document.body.scrollHeight;if(isAtBottom&&!isLoading&&visibleItems.length<items.length){setIsLoading(true);}};window.addEventListener('scroll',handleScroll);return function(){window.removeEventListener('scroll',handleScroll);};},[isLoading,visibleItems.length,items.length]);useEffect(function(){if(isLoading&&visibleItems.length<items.length){var nextItemCount=page*10;var nextItems=items.slice(0,nextItemCount);setVisibleItems(nextItems);setPage(function(prevPage){return prevPage+1;});setIsLoading(false);}},[isLoading,items,visibleItems,page]);return/*#__PURE__*/_jsxs(\"section\",{className:\"itemLayOut\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"topFont\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"topText\",children:topText})}),/*#__PURE__*/_jsx(\"div\",{className:\"item-list\",children:visibleItems.map(function(item,index){return/*#__PURE__*/_jsx(Link,{to:\"/itemdetail/\".concat(item.itemId),children:/*#__PURE__*/_jsxs(\"div\",{className:\"item-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"item-image\",children:item.imagePath?/*#__PURE__*/_jsx(\"img\",{src:item.imagePath,alt:item.name}):/*#__PURE__*/_jsx(\"div\",{className:\"no-image-container\",children:/*#__PURE__*/_jsx(\"span\",{className:\"no-image-text\",children:\"No Image Available\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-details\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"item-name\",children:item.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-price\",children:[\"\\uAC00\\uACA9: \",item.price,\"\\uC6D0\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-description\",children:[\"\\uC124\\uBA85: \",item.description]}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-stock\",children:[\"\\uAD6C\\uB9E4 \\uAC00\\uB2A5 \\uC218\\uB7C9: \",item.amount]}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-stock\",children:[\"\\uC7AC\\uACE0: \",item.currentStock]})]})]})},index);})}),isLoading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})]});};export default ItemLayOut;","map":{"version":3,"names":["React","useEffect","useState","Link","jsx","_jsx","jsxs","_jsxs","ItemLayOut","_ref","items","topText","onLoadMore","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","visibleItems","setVisibleItems","_useState5","_useState6","page","setPage","initialItemCount","initialItems","slice","handleScroll","isAtBottom","window","innerHeight","scrollY","document","body","scrollHeight","length","addEventListener","removeEventListener","nextItemCount","nextItems","prevPage","className","children","map","item","index","to","concat","itemId","imagePath","src","alt","name","price","description","amount","currentStock"],"sources":["D:/shinjun_Fanal/camperblic/src/main/frontend/src/pages/item/ItemLayOut.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Item } from \"../../types\";\nimport \"../../styles/itemStyles/itemLayOut.css\";\n\ninterface ItemLayOutProps {\n    items: Item[];\n    topText: string;\n    onLoadMore: () => void;\n}\n\nconst ItemLayOut: React.FC<ItemLayOutProps> = ({ items, topText, onLoadMore }) => {\n    const [isLoading, setIsLoading] = useState(false);\n    const [visibleItems, setVisibleItems] = useState<Item[]>([]);\n    const [page, setPage] = useState(1);\n\n    useEffect(() => {\n        const initialItemCount = 20;\n        const initialItems = items.slice(0, initialItemCount);\n        setVisibleItems(initialItems);\n    }, [items]);\n\n    useEffect(() => {\n        const handleScroll = () => {\n            const isAtBottom =\n                window.innerHeight + window.scrollY >= document.body.scrollHeight;\n\n            if (isAtBottom && !isLoading && visibleItems.length < items.length) {\n                setIsLoading(true);\n            }\n        };\n\n        window.addEventListener('scroll', handleScroll);\n\n        return () => {\n            window.removeEventListener('scroll', handleScroll);\n        };\n    }, [isLoading, visibleItems.length, items.length]);\n\n    useEffect(() => {\n        if (isLoading && visibleItems.length < items.length) {\n            const nextItemCount = page * 10;\n            const nextItems = items.slice(0, nextItemCount);\n\n            setVisibleItems(nextItems);\n            setPage((prevPage) => prevPage + 1);\n            setIsLoading(false);\n        }\n    }, [isLoading, items, visibleItems, page]);\n\n    return (\n        <section className=\"itemLayOut\">\n            <div className=\"topFont\">\n                <h1 className=\"topText\">{topText}</h1>\n            </div>\n            <div className=\"item-list\">\n                {visibleItems.map((item, index) => (\n                    <Link to={`/itemdetail/${item.itemId}`} key={index}>\n                        <div className=\"item-card\">\n                            <div className=\"item-image\">\n                                {item.imagePath ? (\n                                    <img src={item.imagePath} alt={item.name} />\n                                ) : (\n                                    <div className=\"no-image-container\">\n                                        <span className=\"no-image-text\">No Image Available</span>\n                                    </div>\n                                )}\n                            </div>\n                            <div className=\"item-details\">\n                                <h2 className=\"item-name\">{item.name}</h2>\n                                <p className=\"item-price\">가격: {item.price}원</p>\n                                <p className=\"item-description\">설명: {item.description}</p>\n                                <p className=\"item-stock\">구매 가능 수량: {item.amount}</p>\n                                <p className=\"item-stock\">재고: {item.currentStock}</p>\n                            </div>\n                        </div>\n                    </Link>\n                ))}\n            </div>\n            {isLoading && <p>Loading...</p>}\n        </section>\n    );\n};\n\nexport default ItemLayOut;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}