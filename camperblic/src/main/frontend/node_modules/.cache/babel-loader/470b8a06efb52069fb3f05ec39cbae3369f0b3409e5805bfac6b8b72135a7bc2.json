{"ast":null,"code":"import _slicedToArray from\"D:/shinjun_Fanal/camperblic/src/main/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import\"../../styles/itemStyles/itemLayOut.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ItemLayOut=function ItemLayOut(_ref){var items=_ref.items,topText=_ref.topText,onLoadMore=_ref.onLoadMore;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),visibleItems=_useState4[0],setVisibleItems=_useState4[1];useEffect(function(){var initialItemCount=20;var initialItems=items.slice(0,initialItemCount);setVisibleItems(initialItems);},[items]);useEffect(function(){var handleScroll=function handleScroll(){var isAtBottom=window.innerHeight+window.scrollY>=document.body.offsetHeight;if(isAtBottom&&!isLoading&&visibleItems.length<items.length){setIsLoading(true);}};window.addEventListener('scroll',handleScroll);return function(){window.removeEventListener('scroll',handleScroll);};},[isLoading,visibleItems.length]);useEffect(function(){if(isLoading&&visibleItems.length<items.length){var nextItemCount=visibleItems.length+10;var nextItems=items.slice(0,nextItemCount);setVisibleItems(nextItems);onLoadMore();setIsLoading(false);}},[isLoading,items,visibleItems,onLoadMore]);return/*#__PURE__*/_jsxs(\"section\",{className:\"itemLayOut\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"topFont\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"topText\",children:topText})}),/*#__PURE__*/_jsx(\"div\",{className:\"item-list\",children:visibleItems.map(function(item,index){return/*#__PURE__*/_jsx(Link,{to:\"/itemdetail/\".concat(item.itemId),children:/*#__PURE__*/_jsxs(\"div\",{className:\"item-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"item-image\",children:/*#__PURE__*/_jsx(\"img\",{src:item.imagePath,alt:item.name,onError:function onError(e){e.currentTarget.src='fallback-image-url';// 대체 이미지 URL을 입력하세요.\n}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-details\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"item-name\",children:item.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-price\",children:[\"\\uAC00\\uACA9: \",item.price,\"\\uC6D0\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-description\",children:[\"\\uC124\\uBA85: \",item.description]}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-stock\",children:[\"\\uAD6C\\uB9E4 \\uAC00\\uB2A5 \\uC218\\uB7C9: \",item.amount]}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-stock\",children:[\"\\uC7AC\\uACE0: \",item.currentStock]})]})]})},index);})}),isLoading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})]});};export default ItemLayOut;","map":{"version":3,"names":["React","useEffect","useState","Link","jsx","_jsx","jsxs","_jsxs","ItemLayOut","_ref","items","topText","onLoadMore","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","visibleItems","setVisibleItems","initialItemCount","initialItems","slice","handleScroll","isAtBottom","window","innerHeight","scrollY","document","body","offsetHeight","length","addEventListener","removeEventListener","nextItemCount","nextItems","className","children","map","item","index","to","concat","itemId","src","imagePath","alt","name","onError","e","currentTarget","price","description","amount","currentStock"],"sources":["D:/shinjun_Fanal/camperblic/src/main/frontend/src/pages/item/ItemLayOut.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Item } from \"../../types\";\nimport \"../../styles/itemStyles/itemLayOut.css\";\n\ninterface ItemLayOutProps {\n    items: Item[];\n    topText: string;\n    onLoadMore: () => void;\n}\n\nconst ItemLayOut: React.FC<ItemLayOutProps> = ({ items, topText, onLoadMore }) => {\n    const [isLoading, setIsLoading] = useState(false);\n    const [visibleItems, setVisibleItems] = useState<Item[]>([]);\n\n    useEffect(() => {\n        const initialItemCount = 20;\n        const initialItems = items.slice(0, initialItemCount);\n        setVisibleItems(initialItems);\n    }, [items]);\n\n    useEffect(() => {\n        const handleScroll = () => {\n            const isAtBottom = window.innerHeight + window.scrollY >= document.body.offsetHeight;\n\n            if (isAtBottom && !isLoading && visibleItems.length < items.length) {\n                setIsLoading(true);\n            }\n        };\n\n        window.addEventListener('scroll', handleScroll);\n\n        return () => {\n            window.removeEventListener('scroll', handleScroll);\n        };\n    }, [isLoading, visibleItems.length]);\n\n    useEffect(() => {\n        if (isLoading && visibleItems.length < items.length) {\n            const nextItemCount = visibleItems.length + 10;\n            const nextItems = items.slice(0, nextItemCount);\n\n            setVisibleItems(nextItems);\n            onLoadMore();\n            setIsLoading(false);\n        }\n    }, [isLoading, items, visibleItems, onLoadMore]);\n\n    return (\n        <section className=\"itemLayOut\">\n            <div className=\"topFont\">\n                <h1 className=\"topText\">{topText}</h1>\n            </div>\n            <div className=\"item-list\">\n                {visibleItems.map((item, index) => (\n                    <Link to={`/itemdetail/${item.itemId}`} key={index}>\n                        <div className=\"item-card\">\n                            <div className=\"item-image\">\n                                <img\n                                    src={item.imagePath}\n                                    alt={item.name}\n                                    onError={(e) => {\n                                        e.currentTarget.src = 'fallback-image-url'; // 대체 이미지 URL을 입력하세요.\n                                    }}\n                                />\n                            </div>\n                            <div className=\"item-details\">\n                                <h2 className=\"item-name\">{item.name}</h2>\n                                <p className=\"item-price\">가격: {item.price}원</p>\n                                <p className=\"item-description\">설명: {item.description}</p>\n                                <p className=\"item-stock\">구매 가능 수량: {item.amount}</p>\n                                <p className=\"item-stock\">재고: {item.currentStock}</p>\n                            </div>\n                        </div>\n                    </Link>\n                ))}\n            </div>\n            {isLoading && <p>Loading...</p>}\n        </section>\n    );\n};\n\nexport default ItemLayOut;\n"],"mappings":"mIAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,IAAI,KAAQ,kBAAkB,CAEvC,MAAO,wCAAwC,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAQhD,GAAM,CAAAC,UAAqC,CAAG,QAAxC,CAAAA,UAAqCA,CAAAC,IAAA,CAAuC,IAAjC,CAAAC,KAAK,CAAAD,IAAA,CAALC,KAAK,CAAEC,OAAO,CAAAF,IAAA,CAAPE,OAAO,CAAEC,UAAU,CAAAH,IAAA,CAAVG,UAAU,CACvE,IAAAC,SAAA,CAAkCX,QAAQ,CAAC,KAAK,CAAC,CAAAY,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA1CG,SAAS,CAAAF,UAAA,IAAEG,YAAY,CAAAH,UAAA,IAC9B,IAAAI,UAAA,CAAwChB,QAAQ,CAAS,EAAE,CAAC,CAAAiB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAArDE,YAAY,CAAAD,UAAA,IAAEE,eAAe,CAAAF,UAAA,IAEpClB,SAAS,CAAC,UAAM,CACZ,GAAM,CAAAqB,gBAAgB,CAAG,EAAE,CAC3B,GAAM,CAAAC,YAAY,CAAGb,KAAK,CAACc,KAAK,CAAC,CAAC,CAAEF,gBAAgB,CAAC,CACrDD,eAAe,CAACE,YAAY,CAAC,CACjC,CAAC,CAAE,CAACb,KAAK,CAAC,CAAC,CAEXT,SAAS,CAAC,UAAM,CACZ,GAAM,CAAAwB,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CACvB,GAAM,CAAAC,UAAU,CAAGC,MAAM,CAACC,WAAW,CAAGD,MAAM,CAACE,OAAO,EAAIC,QAAQ,CAACC,IAAI,CAACC,YAAY,CAEpF,GAAIN,UAAU,EAAI,CAACV,SAAS,EAAII,YAAY,CAACa,MAAM,CAAGvB,KAAK,CAACuB,MAAM,CAAE,CAChEhB,YAAY,CAAC,IAAI,CAAC,CACtB,CACJ,CAAC,CAEDU,MAAM,CAACO,gBAAgB,CAAC,QAAQ,CAAET,YAAY,CAAC,CAE/C,MAAO,WAAM,CACTE,MAAM,CAACQ,mBAAmB,CAAC,QAAQ,CAAEV,YAAY,CAAC,CACtD,CAAC,CACL,CAAC,CAAE,CAACT,SAAS,CAAEI,YAAY,CAACa,MAAM,CAAC,CAAC,CAEpChC,SAAS,CAAC,UAAM,CACZ,GAAIe,SAAS,EAAII,YAAY,CAACa,MAAM,CAAGvB,KAAK,CAACuB,MAAM,CAAE,CACjD,GAAM,CAAAG,aAAa,CAAGhB,YAAY,CAACa,MAAM,CAAG,EAAE,CAC9C,GAAM,CAAAI,SAAS,CAAG3B,KAAK,CAACc,KAAK,CAAC,CAAC,CAAEY,aAAa,CAAC,CAE/Cf,eAAe,CAACgB,SAAS,CAAC,CAC1BzB,UAAU,CAAC,CAAC,CACZK,YAAY,CAAC,KAAK,CAAC,CACvB,CACJ,CAAC,CAAE,CAACD,SAAS,CAAEN,KAAK,CAAEU,YAAY,CAAER,UAAU,CAAC,CAAC,CAEhD,mBACIL,KAAA,YAAS+B,SAAS,CAAC,YAAY,CAAAC,QAAA,eAC3BlC,IAAA,QAAKiC,SAAS,CAAC,SAAS,CAAAC,QAAA,cACpBlC,IAAA,OAAIiC,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAE5B,OAAO,CAAK,CAAC,CACrC,CAAC,cACNN,IAAA,QAAKiC,SAAS,CAAC,WAAW,CAAAC,QAAA,CACrBnB,YAAY,CAACoB,GAAG,CAAC,SAACC,IAAI,CAAEC,KAAK,qBAC1BrC,IAAA,CAACF,IAAI,EAACwC,EAAE,gBAAAC,MAAA,CAAiBH,IAAI,CAACI,MAAM,CAAG,CAAAN,QAAA,cACnChC,KAAA,QAAK+B,SAAS,CAAC,WAAW,CAAAC,QAAA,eACtBlC,IAAA,QAAKiC,SAAS,CAAC,YAAY,CAAAC,QAAA,cACvBlC,IAAA,QACIyC,GAAG,CAAEL,IAAI,CAACM,SAAU,CACpBC,GAAG,CAAEP,IAAI,CAACQ,IAAK,CACfC,OAAO,CAAE,SAAAA,QAACC,CAAC,CAAK,CACZA,CAAC,CAACC,aAAa,CAACN,GAAG,CAAG,oBAAoB,CAAE;AAChD,CAAE,CACL,CAAC,CACD,CAAC,cACNvC,KAAA,QAAK+B,SAAS,CAAC,cAAc,CAAAC,QAAA,eACzBlC,IAAA,OAAIiC,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAEE,IAAI,CAACQ,IAAI,CAAK,CAAC,cAC1C1C,KAAA,MAAG+B,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,gBAAI,CAACE,IAAI,CAACY,KAAK,CAAC,QAAC,EAAG,CAAC,cAC/C9C,KAAA,MAAG+B,SAAS,CAAC,kBAAkB,CAAAC,QAAA,EAAC,gBAAI,CAACE,IAAI,CAACa,WAAW,EAAI,CAAC,cAC1D/C,KAAA,MAAG+B,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,0CAAU,CAACE,IAAI,CAACc,MAAM,EAAI,CAAC,cACrDhD,KAAA,MAAG+B,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,gBAAI,CAACE,IAAI,CAACe,YAAY,EAAI,CAAC,EACpD,CAAC,EACL,CAAC,EAlBmCd,KAmBvC,CAAC,EACV,CAAC,CACD,CAAC,CACL1B,SAAS,eAAIX,IAAA,MAAAkC,QAAA,CAAG,YAAU,CAAG,CAAC,EAC1B,CAAC,CAElB,CAAC,CAED,cAAe,CAAA/B,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}